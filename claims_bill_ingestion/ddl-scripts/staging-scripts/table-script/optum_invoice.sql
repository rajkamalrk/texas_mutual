DROP TABLE IF EXISTS txm_bitx_staging.optum_invoice;
CREATE TABLE txm_bitx_staging.optum_invoice (
  invoice_header_id int NOT NULL PRIMARY KEY AUTO_INCREMENT,
  file_header_id INT,
  batch_datetime datetime,
  transmission_type varchar(1),
  pbm_rx_no varchar(10),
  invoice_number varchar(15),
  sequence varchar(5),
  claim_number varchar(30),
  employer_code varchar(20),
  member_last_name varchar(25),
  member_first_name varchar(25),
  member_middle_init varchar(1),
  date_of_injury date,
  ssn varchar(9),
  dea varchar(10),
  physician_last_name varchar(25),
  physician_first_name varchar(25),
  physician_middle_init varchar(1),
  ndc varchar(11),
  rx_number varchar(7),
  rx_quantity INT,
  drug_name varchar(50),
  date_filled date,
  generic varchar(1),
  recommended_amount varchar(10),
  fee_schedule Decimal(10,2),
  contract_amount Decimal(10,2),
  cost_amount Decimal(10,2),
  charged_amount Decimal(10,2),
  tax_amount varchar(10),
  nabp varchar(10),
  error_code varchar(1),
  bill_calculation_date date,
  network varchar(1),
  bill_type varchar(1),
  irs_number varchar(9),
  sn_address1 varchar(35),
  sn_address2 varchar(35),
  sn_city varchar(20),
  sn_state varchar(2),
  sn_zip_code varchar(10),
  refill varchar(3),
  days_supply varchar(3),
  physician_address varchar(35),
  physician_city varchar(20),
  physician_state varchar(2),
  physician_zip_code varchar(10),
  sn_name varchar(35),
  pharmacy_name varchar(35),
  pharmacy_address1 varchar(35),
  pharmacy_address2 varchar(35),
  pharmacy_city varchar(20),
  pharmacy_state varchar(2),
  pharmacy_zip varchar(10),
  date_received date,
  employee_dob date,
  employee_gender varchar(1),
  pharmacy_phone_number bigint,
  employer_name varchar(35),
  employer_address1 varchar(35),
  employer_city varchar(20),
  employer_state varchar(10),
  employer_zip_code varchar(10),
  employer_phone_number varchar(10),
  date_written date,
  daw_cde varchar(1),
  pre_auth varchar(20),
  dispensing_pharmacy_npi varchar(10),
  prescriber_npi varchar(10),
  generic_available_ndc varchar(11),
  patient_pay_amount int,
  create_user VARCHAR(50),
  update_user VARCHAR(50),
  create_timestamp DATETIME(6),
  update_timestamp DATETIME(6),
  FOREIGN KEY (file_header_id) REFERENCES optum_file_header(file_header_id),
  INDEX idx_file_header_id (file_header_id)
);